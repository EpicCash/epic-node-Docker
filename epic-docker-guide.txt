# Running Epic Node Server from Docker .tar created with Dockerfile

# Clone the epic node repo - install git if you don't have it (sudo apt install git)

$ git clone https://github.com/EpicCash/epic.git

# Clone the epic-node-Docker Repo

$ git clone https://github.com/EpicCash/epic-node-Docker.git

# Copy Dockerfile, Makefile, epic-server.toml, entrypoint.sh from epic-node-Docker folder to epic folder (you can rename Dockerfile in epic folder to keep old version before copy)

# Create Docker .tar file in epic folder (Uses Dockerfile and Makefile)

$ sudo make

# Create Image epic-node from .tar

$ docker load < epic-docker.tar

# Image epic-node ready to run as container (user: epicnode)

$ docker run --restart always --name epic-node -h 'epic-node' -d epic-node

# Check node running

$ docker logs -f epic-node (<ctrl>C to exit) or $ docker stats (<ctrl>C to exit)

# Interact with running container

$ docker exec -it epic-node bash
  epicnode@epic-node:~$ screen -r node-server (attach to screen running Epic Node Server)
# <ctrl>A then D to detach from screen and back to epicnode@epic-node:~$
  epicnode@epic-node:~$ exit (to leave Container)
$

# Stop/Start Container

$ docker stop epic-node
$ docker start epic-node

# Edit crontab (crontab -e) to restart every other day (add to end of crontab file <ctrl>X then Y to save)

  5 1 */2 * * docker stop epic-node && sleep 20 && docker start epic-node

# Note: Docker Container (changed) contents are not persistent. So if you stop and restart, it will have to
# get the bootstrap and re-sync on startup, so you get a fresh blockchain every restart. You may wish to skip
# crontab and just let the node run until there is an issue that requires a Container restart.

# Note: If node data becomes corrupted or server gets hung up:
# Stop and restart Container

# To Remove Container and Image: (you need to load and run again to create a new Container from .tar->Image)

$ docker stop epic-node
$ docker rm epic-node
$ docker rmi epic-node



