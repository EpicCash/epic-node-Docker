# Running Epic Node Server from Docker 

# Clone the epic-node-docker Repo

$ git clone https://github.com/EpicCash/epic-node-docker.git

$ cd epic-node-docker

# Providing access to node to check status (optional) https:/node.yourdomain.dom:3413/v1/status
# Public access to node is done using nginx and a domain name. You will need a ddns account. Go here: https://freedns.afraid.org
# You can create a node domain for your router like node.mydomain.somedomain.dom
# If you run this on a LAN device behind a router you will need to set up forwarding for port 80, 443, and 3413 to that device IP
# If using ddns change 'mydomain.somedomain.dom' in entrypoint.sh to match your ddns node domain -
# (it will check for certs and run certbot to install if missing) and replace webmaster@example.com with your email address

# If you don't need public access to the node (to check status) you can just forward port 3413 and skip ddns: comment out the 
# check for certs section at the bottom of entrypoint.sh and 'nginx \' & 'COPY epicnode.nginx...' in Dockerfile as you won't need nginx

# Create a local volume for node data
$ sudo docker volume create epicdata

# A Docker Compose file is included to build and start:
# Add your user to the docker group so you donâ€™t need sudo for every command.

$ sudo docker compose up -d

# Check node running - you should see progress of bootstrap download and unzip then (optional) cert creation:

$ sudo docker logs -f epic-node (<ctrl>C to exit)

# Interact with running container

$ sudo docker exec -it epic-node bash

  epicsvcs@epic-node:~$ screen -r epicnode (attach to screen running Epic Node Server)

# <ctrl>A then D to detach from screen

  epicsvcs@epic-node:~$ screen -r epicbox (attach to screen running epicbox Server)

# <ctrl>A then D to detach from screen

  epicsvcs@epic-node:~$ exit (to leave Container)
$

# Stop/Start Container

$ sudo docker compose down
$ sudo docker compose up -d

# Note: Docker Container (changed) contents are persistent using local volume

# If node data becomes corrupted or server gets hung up:
# Stop Container
# Delete bs file in /var/lib/docker/volumes/epicdata/_data
# Start Container - it will download Bootstrap, unzip, and finish a fresh sync

# Remove entire installation:
$ sudo docker compose down
$ sudo docker rm epic-node
$ sudo docker rmi epic-node

# Note: If you are running the Docker on a LAN server you will need to forward ports 3413, 3414 to the server IP.

# Note: Make sure you have VPN turned off for first time run of container if it runs certbot or certbot will fail
# receiving the challenge back to create the certs.

# A good free ddns: https://freedns.afraid.org supports multi level subdomains and a big selection of private
# and public domains to add subdomains to.




